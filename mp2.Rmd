---
title: "Mini-Project 2"
author: "Your Name Here"
date: "October 31, 2017"
output: html_document
---

```{r, include=FALSE}
library(tidyverse)
load("house_elections.rda")
load("candidates.rda")
load("committees.rda")
load("contributions.rda")
```

keepindviduals <- select(individuals, cmte_id, transaction_pgi, entity_type, name, city, state, zip_code, transaction_dt, transaction_amt) 

keepcontributions <- select(contributions, cmte_id, transaction_pgi, entity_type, name, city, state, zip_code, transaction_dt, transaction_amt, other_id, cand_id)

keepcandidates <- select(candidates, cand_id, cand_name, cand_party_affiliation, cand_election_yr, cand_office_state, cand_office, cand_office_district, cand_ici, cand_pcc)

keepcommittees <- select(committees, cmte_id, cmte_name, cmte_city, cmte_state, cmte_zip, cmte_dsgn, cmte_type, cmte_party_affiliation, cand_id)

wowow <- full_join(keepcontributions, keepcandidates)

keephouse_elections <- rename(house_elections, cand_id = fec_id)

watwat <- full_join(keephouse_elections, keepcandidates)

incumbent_money <- inner_join(wowow, watwat, by = "cand_id")


incumbent_money <- inner_join(wowow, watwat, by = "cand_id")

keepsuperpaccommittees <- filter(keepcommittees, cmte_type == "O")

superpac_money <- left_join(keepsuperpaccommittees, incumbent_money, by="cmte_id")

View(superpac_money)


nonasuperpac_money_clean <- na.omit(superpac_money_clean)

ggplot(nona_party_superpac_money, aes(x = cand_name.x, y = total, color = cmte_name)) + 
  geom_point() +
  facet_wrap(~ cand_party_affiliation.x)

  
party_superpac_money <- superpac_money %>%
group_by(cand_name.x, cand_party_affiliation.x, incumbent, ge_winner) %>%
summarize(total = sum(transaction_amt))

View(party_superpac_money)

nona_party_superpac_money <- na.omit(party_superpac_money) %>%
filter(cand_party_affiliation.x == "REP"|cand_party_affiliation.x == "DEM")
View(nona_party_superpac_money)





graph1 <- ggplot(nona_party_superpac_money, aes(x=cand_name.x, y= total, col=ge_winner)) +
geom_point() +
facet_wrap(cand_party_affiliation.x~incumbent)

graph1