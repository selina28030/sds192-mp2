---
title: "Mini-Project 2"
author: "Your Name Here"
date: "October 31, 2017"
output: html_document
---

library(tidyverse)

## Loading the data

This project is so interesting and relevant to my life! lol so funny

```{r, include=FALSE}
library(tidyverse)
load("house_elections.rda")
load("candidates.rda")
load("committees.rda")
load("contributions.rda")
```
View(house_elections)
View(candidates)
View(committees)
View(contributions)

glimpse(individuals)


#Only trying to get the people who have ran twice.
rantwice <- house_elections %>%
  group_by(candidate_name) %>%
  summarize(N = n()) %>%
  filter(N == 2)

twice <- house_elections %>%
  filter(incumbent == "TRUE")

View(twice)
View(rantwice)

#Now trying to get the contributions made by each committee. we'll have to merge tables :'(((


contribution_filtered <- contributions %>%
  select(cmte_id, transaction_amt, cand_id)
View(contribution_filtered)

committee_premerge <- committees %>%
  select(cmte_name, cmte_id, cand_id)
  
View(committee_premerge)

merged_data <- full_join(contribution_filtered, committee_premerge, by = "cmte_id")

View(merged_data)

#how do we merge the committee and the candidate?

merged_data2 <- merged_data %>%
  mutate(cand_id = cand_id.x)

View(merged_data2)

premerge_twice <- mutate(twice, cand_name = candidate_name)

View(premerge_twice)

candidate_name <- candidates %>%
select(cand_id, cand_name)

View(candidate_name)

state_premerge <- candidates %>%
mutate(state = cand_state)
  
rantwice <- full_join(premerge_twice, state_premerge, by = "state") %>%
  filter(incumbent == "TRUE")

View(rantwice)

ran_twice_shortened <- rantwice %>%
select()
group_by(candidate_name) %>%
summarize()

View(ran_twice_shortened)

tryagain <- full_join(merged_data2, candidate_name, by= "cand_id"")
View(tryagain)


newdata <- tryagain %>%
group_by(cand_name) %>%
summarize()

View(newdata)

keepindviduals <- select(individuals, cmte_id, transaction_pgi, entity_type, name, city, state, zip_code, transaction_dt, transaction_amt) 

keepcontributions <- select(contributions, cmte_id, transaction_pgi, entity_type, name, city, state, zip_code, transaction_dt, transaction_amt, other_id, cand_id)

keepcandidates <- select(candidates, cand_id, cand_name, cand_party_affiliation, cand_election_yr, cand_office_state, cand_office, cand_office_district, cand_ici, cand_pcc)

keepcommittees <- select(committees, cmte_id, cmte_name, cmte_city, cmte_state, cmte_zip, cmte_dsgn, cmte_type, cmte_party_affiliation, cand_id)

wowow <- full_join(keepcontributions, keepcandidates)

howhow <- full_join(wowow, keephouse_elections)

keephouse_elections <- rename(house_elections, cand_id = fec_id)

watwat <- full_join(keephouse_elections, keepcandidates)

#push push push
